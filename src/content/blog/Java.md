---
author: cobo
pubDatetime: 2023-01-30T15:57:52.737Z
title: java
featured: false
draft: false
tags:
 - robot
description: this is auto generate
---
# 代码片段收集

> 收集平常好用的代码片段



## Mybatis

### jpa拼接脚本

```java
	@Select("<script> " +
			" select v.* from tb_srv_inse t left join vsm_apply_detail p " +
			" on t.application_id = p.application_id left join tb_vsm_group v " +
			" on p.hsm_group_id = v.id " +
			" <where> v.id is not null " +
			" <if test='tenantId != null'>" +
			"	and t.srv_inse_tenant_id = #{tenantId}" +
			" </if>" +
			" </where> " +
			" </script> ")
```





### 动态查询

```java
    @Select("<script> select t.* from tb_srv_inse t where t.srv_inse_type != 3 and t.id " +
            "in (select s.tb_srv_inse_id from sys_user_srv_inse_role s where s.user_id=#{userId} " +
            " <if test='tbSrvInse.srvInseName !=null and tbSrvInse.srvInseName !=\"\"'> " +
            "and t.srv_inse_name like '%${tbSrvInse.srvInseName}%'" +
            "</if>" +
            ") </script>")
    IPage<TbSrvInse> queryInlineUserMMyyTbSrvInse(Page<TbSrvInse> page, @Param("userId") String userId, @Param("tbSrvInse") TbSrvInse tbSrvInse);
```



## 常用业务代码

```java
	items = JSON.parseObject(shget, new TypeReference<List<SysUserSrvInseRole>>() {
				}.getType());
```

### 区间合成

先找到区间开始的索引，在拉出区间

```java
private static String toRange(List<Integer> waitMerge) {
        List<Integer> heads = new ArrayList<>();
        for (int i = 0; i < waitMerge.size(); i++) {
            if (i == 0) {
                heads.add(0);
                continue;
            }
            int beforeNode = i - 1;
            if ((waitMerge.get(beforeNode)+1) != waitMerge.get(i)) {
                heads.add(i);
            }
        }
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < heads.size(); i++) {
            int nextHead = i + 1;
            if (nextHead >= heads.size()) {
                Integer i1 = heads.get(i);
                if (i1 == (waitMerge.size() - 1)) {
                    sb.append(",");
                    sb.append(waitMerge.get(i1));
                }else {
                    sb.append(",");
                    sb.append(waitMerge.get(i1));
                    sb.append("-");
                    sb.append(waitMerge.get(waitMerge.size() - 1));
                }
            }else {
                Integer nb = heads.get(nextHead);
                Integer ls = heads.get(i);
                if (ls == (nb - 1)) {
                    sb.append(",");
                    sb.append(waitMerge.get(ls));
                }else {
                    sb.append(",");
                    sb.append(waitMerge.get(ls));
                    sb.append("-");
                    sb.append(waitMerge.get(nb - 1));
                }
            }
        }
        return sb.toString();
    }

```



```
sys_quartz_job
```

delete qrtz_job_details where JOB_NAME='kl.kcsp.modules.srvinse.job.TbSrvInseValidMonitorJob'


1391576778795036674	admin	2021-05-10 10:12:13	0	admin	2021-05-10 10:12:24	kl.kcsp.modules.srvinse.job.TbSrvInseValidMonitorJob	0 1 1 * * ? *	NULL	服务过期检查	-1

```
INSERT INTO  "qrtz_job_details"("SCHED_NAME","JOB_NAME","JOB_GROUP","DESCRIPTION","JOB_CLASS_NAME","IS_DURABLE","IS_NONCONCURRENT","IS_UPDATE_DATA","REQUESTS_RECOVERY","JOB_DATA") VALUES('MyScheduler','kl.kcsp.modules.bakrec.job.AutoBkJob','DEFAULT',null,'kl.kcsp.modules.bakrec.job.AutoBkJob','0','0','0','0',0xACED0005737200156F72672E71756172747A2E4A6F62446174614D61709FB083E8BFA9B0CB020000787200266F72672E71756172747A2E7574696C732E537472696E674B65794469727479466C61674D61708208E8C3FBC55D280200015A0013616C6C6F77735472616E7369656E74446174617872001D6F72672E71756172747A2E7574696C732E4469727479466C61674D617013E62EAD28760ACE0200025A000564697274794C00036D617074000F4C6A6176612F7574696C2F4D61703B787001737200116A6176612E7574696C2E486173684D61700507DAC1C31660D103000246000A6C6F6164466163746F724900097468726573686F6C6478703F4000000000000C77080000001000000001740009706172616D65746572707800);
INSERT INTO  "qrtz_job_details"("SCHED_NAME","JOB_NAME","JOB_GROUP","DESCRIPTION","JOB_CLASS_NAME","IS_DURABLE","IS_NONCONCURRENT","IS_UPDATE_DATA","REQUESTS_RECOVERY","JOB_DATA") VALUES('MyScheduler','kl.kcsp.modules.chsm.job.CheckChsmStatusJob','DEFAULT',null,'kl.kcsp.modules.chsm.job.CheckChsmStatusJob','0','0','0','0',0xACED0005737200156F72672E71756172747A2E4A6F62446174614D61709FB083E8BFA9B0CB020000787200266F72672E71756172747A2E7574696C732E537472696E674B65794469727479466C61674D61708208E8C3FBC55D280200015A0013616C6C6F77735472616E7369656E74446174617872001D6F72672E71756172747A2E7574696C732E4469727479466C61674D617013E62EAD28760ACE0200025A000564697274794C00036D617074000F4C6A6176612F7574696C2F4D61703B787001737200116A6176612E7574696C2E486173684D61700507DAC1C31660D103000246000A6C6F6164466163746F724900097468726573686F6C6478703F4000000000000C77080000001000000001740009706172616D65746572707800);
INSERT INTO  "qrtz_job_details"("SCHED_NAME","JOB_NAME","JOB_GROUP","DESCRIPTION","JOB_CLASS_NAME","IS_DURABLE","IS_NONCONCURRENT","IS_UPDATE_DATA","REQUESTS_RECOVERY","JOB_DATA") VALUES('MyScheduler','kl.kcsp.modules.message.job.SendMsgJob','DEFAULT',null,'kl.kcsp.modules.message.job.SendMsgJob','0','0','0','0',0xACED0005737200156F72672E71756172747A2E4A6F62446174614D61709FB083E8BFA9B0CB020000787200266F72672E71756172747A2E7574696C732E537472696E674B65794469727479466C61674D61708208E8C3FBC55D280200015A0013616C6C6F77735472616E7369656E74446174617872001D6F72672E71756172747A2E7574696C732E4469727479466C61674D617013E62EAD28760ACE0200025A000564697274794C00036D617074000F4C6A6176612F7574696C2F4D61703B787001737200116A6176612E7574696C2E486173684D61700507DAC1C31660D103000246000A6C6F6164466163746F724900097468726573686F6C6478703F4000000000000C77080000001000000001740009706172616D65746572707800);
INSERT INTO  "qrtz_job_details"("SCHED_NAME","JOB_NAME","JOB_GROUP","DESCRIPTION","JOB_CLASS_NAME","IS_DURABLE","IS_NONCONCURRENT","IS_UPDATE_DATA","REQUESTS_RECOVERY","JOB_DATA") VALUES('MyScheduler','kl.kcsp.modules.monitor.utils.SaveChsmMonitorInfo','DEFAULT',null,'kl.kcsp.modules.monitor.utils.SaveChsmMonitorInfo','0','0','0','0',0xACED0005737200156F72672E71756172747A2E4A6F62446174614D61709FB083E8BFA9B0CB020000787200266F72672E71756172747A2E7574696C732E537472696E674B65794469727479466C61674D61708208E8C3FBC55D280200015A0013616C6C6F77735472616E7369656E74446174617872001D6F72672E71756172747A2E7574696C732E4469727479466C61674D617013E62EAD28760ACE0200025A000564697274794C00036D617074000F4C6A6176612F7574696C2F4D61703B787001737200116A6176612E7574696C2E486173684D61700507DAC1C31660D103000246000A6C6F6164466163746F724900097468726573686F6C6478703F4000000000000C77080000001000000001740009706172616D65746572707800);
INSERT INTO  "qrtz_job_details"("SCHED_NAME","JOB_NAME","JOB_GROUP","DESCRIPTION","JOB_CLASS_NAME","IS_DURABLE","IS_NONCONCURRENT","IS_UPDATE_DATA","REQUESTS_RECOVERY","JOB_DATA") VALUES('MyScheduler','kl.kcsp.modules.srvinse.job.InseMonitorJob','DEFAULT',null,'kl.kcsp.modules.srvinse.job.InseMonitorJob','0','0','0','0',0xACED0005737200156F72672E71756172747A2E4A6F62446174614D61709FB083E8BFA9B0CB020000787200266F72672E71756172747A2E7574696C732E537472696E674B65794469727479466C61674D61708208E8C3FBC55D280200015A0013616C6C6F77735472616E7369656E74446174617872001D6F72672E71756172747A2E7574696C732E4469727479466C61674D617013E62EAD28760ACE0200025A000564697274794C00036D617074000F4C6A6176612F7574696C2F4D61703B787001737200116A6176612E7574696C2E486173684D61700507DAC1C31660D103000246000A6C6F6164466163746F724900097468726573686F6C6478703F4000000000000C77080000001000000001740009706172616D65746572707800);
INSERT INTO  "qrtz_job_details"("SCHED_NAME","JOB_NAME","JOB_GROUP","DESCRIPTION","JOB_CLASS_NAME","IS_DURABLE","IS_NONCONCURRENT","IS_UPDATE_DATA","REQUESTS_RECOVERY","JOB_DATA") VALUES('MyScheduler','kl.kcsp.modules.srvinse.job.SrvKeySyncJob','DEFAULT',null,'kl.kcsp.modules.srvinse.job.SrvKeySyncJob','0','0','0','0',0xACED0005737200156F72672E71756172747A2E4A6F62446174614D61709FB083E8BFA9B0CB020000787200266F72672E71756172747A2E7574696C732E537472696E674B65794469727479466C61674D61708208E8C3FBC55D280200015A0013616C6C6F77735472616E7369656E74446174617872001D6F72672E71756172747A2E7574696C732E4469727479466C61674D617013E62EAD28760ACE0200025A000564697274794C00036D617074000F4C6A6176612F7574696C2F4D61703B787001737200116A6176612E7574696C2E486173684D61700507DAC1C31660D103000246000A6C6F6164466163746F724900097468726573686F6C6478703F4000000000000C77080000001000000001740009706172616D65746572707800);

INSERT INTO  "qrtz_job_details"("SCHED_NAME","JOB_NAME","JOB_GROUP","DESCRIPTION","JOB_CLASS_NAME","IS_DURABLE","IS_NONCONCURRENT","IS_UPDATE_DATA","REQUESTS_RECOVERY","JOB_DATA") VALUES('MyScheduler','kl.kcsp.modules.vsm.job.CheckVsmStatusJob','DEFAULT',null,'kl.kcsp.modules.vsm.job.CheckVsmStatusJob','0','0','0','0',0xACED0005737200156F72672E71756172747A2E4A6F62446174614D61709FB083E8BFA9B0CB020000787200266F72672E71756172747A2E7574696C732E537472696E674B65794469727479466C61674D61708208E8C3FBC55D280200015A0013616C6C6F77735472616E7369656E74446174617872001D6F72672E71756172747A2E7574696C732E4469727479466C61674D617013E62EAD28760ACE0200025A000564697274794C00036D617074000F4C6A6176612F7574696C2F4D61703B787001737200116A6176612E7574696C2E486173684D61700507DAC1C31660D103000246000A6C6F6164466163746F724900097468726573686F6C6478703F4000000000000C77080000001000000001740009706172616D65746572707800);
```